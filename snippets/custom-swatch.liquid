{% comment %}
Set the extension of your color files below. Use 'png', 'jpeg', 'jpg' or 'gif'.
{% endcomment %}

{%- assign file_extension = 'png' -%}
{%- assign found_option = false -%}
{%- assign is_color = true -%}
{%- assign option_index = 0 -%}

{%- for option in product.options -%}
  {%- if option == swatch -%}
    {%- assign found_option = true -%}
    {%- assign option_index = forloop.index0 -%}
    {%- assign downcased_option = swatch | downcase -%}
    {%- if downcased_option contains 'color' or downcased_option contains 'colour' -%}
      {%- assign is_color = true -%}

      <style>
        [data-section-id="{{ section.id }}"] .selector-wrapper[data-id="productSelect--product-template-option-{{ option_index }}"], [data-section-id="{{ section.id }}"] label[for="productSelect--product-template-option-{{ option_index }}"], [data-section-id="{{ section.id }}"] #productSelect--product-template-option-{{ option_index }}{
          display: none !important;
        }
      </style>
    {%- endif -%}
  {%- endif -%}
{%- endfor -%}

<div class="swatch clearfix" data-option-index="{{ option_index }}">
  {%- assign values = '' -%}

  {%- if swiper == true -%}
    <div class="variant-thums-container">
      <div class="swiper mySwiper3">
        <div class="swiper-wrapper">
          {%- for variant in product.variants -%}
            {%- assign value = variant.options[option_index] -%}
            {%- unless values contains value -%}
              {%- assign values = values | join: ',' -%}
              {%- assign values = values | append: ',' | append: value -%}
              {%- assign values = values | split: ',' -%}
              <div class="swiper-slide">
                <div data-value="{{ value | escape }}" class="swatch-element {% if is_color %}color {% endif %}{{ value | handle }} {% if variant.available %}available{% else %}soldout{% endif %}">
                  <input
                    id="product_id-{{ product.id }}-swatch-{{ option_index }}-{{ value | handle }}"
                    type="radio"
                    name="product_id-{{ product.id }}-option-{{ option_index }}"
                    value="{{ value | escape }}"
                    {% if forloop.first %}
                    checked
                    {% endif %}
                    title="{{ value | escape }}"
                    onclick="selectVariant({{ variant.id }})" />
                  {%- if is_color -%}
                    <label for="product_id-{{ product.id }}-swatch-{{ option_index }}-{{ value | handle }}">
                      {% if product.variants.size == 1 %}
                        {% if variant.image == null %}
                          <img
                            class="product-variant-images-img {% if selectedVariantId == variant.id %}selected{% endif %}"
                            src="{{ product.featured_image | img_url: 'medium' }}"
                            alt="{{ product.title | escape }}"
                            width=""
                            height=""
                            data-variant-id="{{ variant.id }}"
                            data-variant-price="{{ variant.price | money }}"
                            data-variant-compare-at-price="{{ variant.compare_at_price | money }}">
                        {% endif %}
                      {% else %}
                        <img
                          class="product-variant-images-img {% if selectedVariantId == variant.id %}selected{% endif %}"
                          src="{{ variant.image | img_url: 'medium' }}"
                          alt="{{ variant.title | escape }}"
                          width=""
                          height=""
                          data-variant-id="{{ variant.id }}"
                          data-variant-price="{{ variant.price | money }}"
                          data-variant-compare-at-price="{{ variant.compare_at_price | money }}">
                      {% endif %}
                    </label>
                  {%- else -%}
                    <label for="swatch-{{ option_index }}-{{ value | handle }}" title="{{ value | escape }}">
                      {{- value -}}
                    </label>
                  {%- endif -%}
                </div>
              </div>
            {%- endunless -%}
          {%- endfor -%}
        </div>
      </div>
      <div class="swiper3-button-next"></div>
      <div class="swiper3-button-prev"></div>
    </div>

  {%- elsif swiper == false -%}
    {%- for variant in product.variants -%}
      {%- assign value = variant.options[option_index] -%}
      {%- unless values contains value -%}
        {%- assign values = values | join: ',' -%}
        {%- assign values = values | append: ',' | append: value -%}
        {%- assign values = values | split: ',' -%}
        <div data-value="{{ value | escape }}" class="swatch-element {% if is_color %}color {% endif %}{{ value | handle }} {% if variant.available %}available{% else %}soldout{% endif %}">
          <input
            id="product_id-{{ product.id }}-swatch-{{ option_index }}-{{ value | handle }}"
            type="radio"
            name="product_id-{{ product.id }}-option-{{ option_index }}"
            value="{{ value | escape }}"
            {% if forloop.first %}
            checked
            {% endif %}
            title="{{ value | escape }}"
            onclick="selectVariant({{ variant.id }})" />
          {%- if is_color -%}
            <label for="product_id-{{ product.id }}-swatch-{{ option_index }}-{{ value | handle }}">
              {% if product.variants.size == 1 %}
                {% if variant.image == null %}
                  <img
                    class="product-variant-images-img {% if selectedVariantId == variant.id %}selected{% endif %}"
                    src="{{ product.featured_image | img_url: 'medium' }}"
                    alt="{{ product.title | escape }}"
                    width=""
                    height=""
                    data-variant-id="{{ variant.id }}"
                    data-variant-price="{{ variant.price | money }}"
                    data-variant-compare-at-price="{{ variant.compare_at_price | money }}">
                {% else %}
                  <img
                    class="product-variant-images-img {% if selectedVariantId == variant.id %}selected{% endif %}"
                    src="{{ variant.image | img_url: 'medium' }}"
                    alt="{{ product.title | escape }}"
                    width=""
                    height=""
                    data-variant-id="{{ variant.id }}"
                    data-variant-price="{{ variant.price | money }}"
                    data-variant-compare-at-price="{{ variant.compare_at_price | money }}">
                {% endif %}
                {{- value -}}
              {% else %}
                <img
                  class="product-variant-images-img {% if selectedVariantId == variant.id %}selected{% endif %}"
                  src="{{ variant.image | img_url: 'medium' }}"
                  alt="{{ variant.title | escape }}"
                  width=""
                  height=""
                  data-variant-id="{{ variant.id }}"
                  data-variant-price="{{ variant.price | money }}"
                  data-variant-compare-at-price="{{ variant.compare_at_price | money }}">
              {% endif %}
            </label>
          {%- else -%}
            <label for="swatch-{{ option_index }}-{{ value | handle }}" title="{{ value | escape }}">
              {{- value -}}
            </label>
          {%- endif -%}
        </div>
      {%- endunless -%}
    {%- endfor -%}
  {%- endif -%}
</div>